<html>
	<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<style>
		body{ margin: 0px;}
		
		#main{

			margin-left: 100px;
			width: 700px;
			height:400px;
			margin-top:100px;
			border:none;
			background-color:#dedede;

		}
		
		.brick{
		    background-color: black;
			width: 8px;
			height: 70px;
			display: inline-block;
			position:absolute;
		}
		
		#brick1{
		
		}
		
		#brick2{
		}
		
		.point{
			-webkit-border-radius: 25px;
			-moz-border-radius: 25px;
			border-radius: 25px;
			background-color: black;
			width: 10px;
			height: 10px;
			position:absolute;
		}
		
		#scoreDiv{
			position:absolute;
			top:15;
			font-size:60px;
			width:200px;
			left:360;
			text-align:center;
		}
		
		.score{
			display: inline;
		}
		
		#leftInfo{
			position: absolute;
			left: 10;
			top: 227;
			font-size:40;
		}
		#rightInfo{
			position: absolute;
			left: 820;
			top: 227;
			font-size:40;
		}
		#btnStart{
		    position: absolute;
			top: 510;
			left: 420;
			font-size:40;
		}
	</style>
	</head>
	<body>
		<div id="scoreDiv"><p class="score" id="scoreLeft">0</p> - <p class="score" id="scoreRight">0</p></div>
		<div id="main">
			<div id="leftInfo">&#8679; W<br><br>&#8681; S</div>
			<div id="rightInfo">&#8679; 9<br><br>&#8681; 6</div>
			<div class="brick" id="brick1"></div>
			<div class="brick" id="brick2"></div>
			<a id="btnStart" href="javascript:start();">Start</a>
			<div class="point"></div>
		</div>
		<script type="text/javascript">
			
			function start(){
				
				pointMovement();
				$('#btnStart').hide();
			}
			
			var limit = { left: 108, top: 100, right: 784, bottom: 490};
			var b1 = $('#brick1');
			var b2 = $('#brick2');
			var p = $('.point');
			
			p.css('top', 300).css('left', 450);
			$('.brick').css('top', 265);
			b2.css('left', limit.right + 10);
			
			
			var keys = {};
			$(document).keydown(function (e) {
				keys[e.which] = true;
			});
			$(document).keyup(function (e) {
				delete keys[e.which];
			});
			var brickSpeed = 10;
			function keyListener(){
			
				if(keys[87]){
					b1up();
				}
				if(keys[105]){
					b2up();
				}
				if(keys[83]){
					b1down();
				}
				if(keys[102]){
					b2down();
				}
				
				setTimeout(function(){ keyListener(); }, brickSpeed);
			}
			
			keyListener();
			
			function brickLimitControl(top, isUp){
				
				if(isUp){
					
					if(top == 100)
						return false;
					else
						return true;
				}
				else{
					
					if(top == 430)
						return false;
					else
						return true;
				}
			}
			
			function b1up(){
				
				var top = b1.position().top;
				if(brickLimitControl(top, true)){
					
					b1.css('top', top - 5);
				}
			}
			function b2up(){
				
				var top = b2.position().top;
				if(brickLimitControl(top, true)){
					
					b2.css('top', top - 5);
				}
			}
			function b1down(){
				
				var top = b1.position().top;
				if(brickLimitControl(top, false)){
					
					b1.css('top', top + 5);
				}
			}
			function b2down(){
				
				var top = b2.position().top;
				if(brickLimitControl(top, false)){
					
					b2.css('top', top + 5);
				}
			}
			
			var nextLeft = 452, nextTop = 298, toRight = true, toUp = true;
			var pointSpeed = 1;
			function pointMovement(){
				
				movePoint();
				setTimeout(function(){ pointMovement(); }, pointSpeed);
			}
			
			function movePoint(){
				
				p.css('top', nextTop).css('left', nextLeft);
				
				if(nextTop == limit.top){
					
					toUp = false;
					nextTop+=2;
				}
				else if(nextTop == limit.bottom){
				
					toUp = true;
					nextTop-=2;
				}
				else if(nextLeft == limit.left){
					
					if(controlLeft()){
					
						toRight = true;
						nextLeft+=2;
					}
					else
						resetPoint(false);
				}
				else if(nextLeft == limit.right){
					
					if(controlRight()){
						toRight = false;
						nextLeft-=2;
					}
					else
						resetPoint(true);
				}
				else{
				
					if(toRight)
						nextLeft+=2;
					else
						nextLeft-=2;
						
					if(toUp)
						nextTop-=2;
					else
						nextTop+=2;
				}
			}
			
			function controlLeft(){
			
				var top = b1.position().top;
				
				if(nextTop + 10 >= top && nextTop <= top + 80)
					return true;
				else {
					
					var score = Number($('#scoreRight').text());
					$('#scoreRight').text(score + 1);
					
					return false;
				}
			}
			
			function controlRight(){
				
				var top = b2.position().top;
				
				if(nextTop + 10 >= top && nextTop <= top + 80)
					return true;
				else {
					
					var score = Number($('#scoreLeft').text());
					$('#scoreLeft').text(score + 1);
					
					return false;
				}
			}
			
			function resetPoint(winnerLeft){
				
				toUp = true;
				nextTop = 298;
				p.css('top', 300).css('left', 450);
				$('.brick').css('top', 265);
				
				if(winnerLeft){
					
					toRight = true;
					nextLeft = 452;
				}
				else{
					
					toRight = false;
					nextLeft = 448;
				}
				
				//var totalScore = Number($('#scoreLeft').text()) + Number($('#scoreRight').text());
				
			}
			
		</script>
	</body>
</html>